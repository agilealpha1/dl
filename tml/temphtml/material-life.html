<!DOCTYPE html>
<html>

<head>
  <title>{{ title }}</title>
  {% csrf_token %}

  <!--Import Google Icon Font-->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <!-- Compiled and minified CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.99.0/css/materialize.min.css">
 <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css">-->

  <!--Let browser know website is optimized for mobile-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <!--ダウンロードバー-->
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
<!--
 <link ref="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
 <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>-->

<link href="/assets/static/reiwadl/css/bootstrap.min.css" rel="stylesheet">
 <script src="/assets/static/reiwadl/js/bootstrap.min.js"></script>
<script src="https://code.jquery.com/jquery-1.12.1.min.js"></script>
<!--<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>-->

  <style>
 .pad {
    padding: 15px;
}

.alert {
    display: none;
}

</style>


</head>

<body style="margin-top:12%;">

  <div class="container">
  　<!--テスト-->

  <div  class="progress-div">

  <label for="namae" accesskey="n">令和ダウンロード進捗：</label>

        <div class="progress" style="width: 84%">
            <div class="progress-bar bg-success progress-bar-striped" 
            role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" 
            style="min-width: 2em; width: 2%;">
                0%
            </div>
        </div>
    </div>
  <!--
<div class="pad">
  <progress class="progress" style="width: 84%" value="0" max="100">0%</progress>
  <div class="alert alert-success" role="alert">令和Download completed!</div>
</div>-->

<!--
<div class="progress" style="width: 84%">
  <div class="indeterminate"></div>
</div>-->

</br>


    <div class="row">
      <form action="" method="post">
        <div class="col s12">
          <div class="card z-depth-0">
            <div class="card-content">
              <span class="card-title">
                <div class="animated bounce">
                  <h5>令和-Download</h5>
                </div>
              </span>

              <div class="row">
                <div class="input-field col s12 m10">
                  <input id="text" type="text" class="validate" name="url" value="">
                  <label for="text">ここにURLをコピーしてください</label>
                </div>
                <div class="input-field col s12 m4 l12">
                 <button type="submit" name="submit" value="2" type="video" id="test2" class="btn modal-action modal-close waves-effect waves-black btn-flat grey darken-4 z-depth-4 white-text">令和Download</buttton>                  

                </div>

              </div>

            </div>
            <div class="card-action center">
              <small>Powered by <a target="_blank" href="https://www.reiwarss.com/#!">令和RSS</a>  </br>
              <a href="mailto:contact@reiwarss.com?subject=feedback to 令和RSS">Feedback</a></small>
            </div>
      </form>
      </div>
      </div>
    </div>

  </div>

  <!--Import jQuery before materialize.js-->
  <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
  <!-- Compiled and minified JavaScript -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.99.0/js/materialize.min.js"></script>
  <script type="text/javascript">
    $(document).ready(function() {
      $('select').material_select();
    });
    $(document).ready(function() {
      // the "href" attribute of the modal trigger must specify the modal ID that wants to be triggered
      $('.modal').modal();
    });

  </script>
</body>
<script>
 $(function () {
        $('.btn').on('click', function () {
                var sitv = setInterval(function(){

                    var prog_url = '/show_progress'  
          
                    $.getJSON(prog_url, function(num_progress){
                      　//$('.progress-div').css('visibility', 'visible');
                        $('.progress-bar').css('width', num_progress );
                        //$('.determinate').css('width', num_progress );
                        $('.progress-bar').text(num_progress );
                                                 
                    });
                }, 1); //100ms更新

        })

})

/*
$(function () {
        $('.btn').on('click', function () {
var $alert = $('.alert');
var $progressBar = $('.progress-bar');

var progress = 0;      // initial value of your progress bar
var timeout = 100;      // number of milliseconds between each frame
var increment = 5;    // increment for each frame
var maxprogress = 100; // when to leave stop running the animation
var prog_url = '/show_progress' 

var timerId, percent;

// reset progress bar

percent = 0;
progressBar.css('width', '0px').addClass('progress-bar-animated active');
progressBar.html('<span class="spinner-border spinner-border-sm ml-auto"></span>');

function animate() {
    setTimeout(function () {

      $.getJSON(prog_url, function(num_progress){
                      　//$('.progress-div').css('visibility', 'visible');
                        $('.progress-bar').css('width', num_progress );
                        //$('.determinate').css('width', num_progress );
                        $('.progress-bar').text(num_progress );
                        // increment progress bar


                        progress += num_progress/100;
        if(progress < maxprogress) {
            //$progressBar.attr('value', progress);
            $progressBar.css('width', num_progress );
            animate();
        } else {
            $progressBar.css('display', 'none');
            $alert.css('display', 'block');
        }
                                                 
                    });
    }, timeout);
};
animate();
})
})
*/
 </script>

 
</html>